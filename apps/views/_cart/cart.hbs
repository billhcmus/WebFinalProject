<style>
    .actions {
        margin-top: -2%; 
        margin-bottom: 4%;
        text-align: center;

    }
</style>

{{> a_HeaderCart}}
    <div class="single-product-area">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <div class="product-content-right">
                        <div class="woocommerce">
                            <form id='table_cart'></form>
                                {{> cart_ListProducts}}
                                <form class="form-group actions" method="POST" action="/cart/update" id='table_cart'>
                                    <input type="submit" value="Cập nhật giỏ hàng" name="update_cart" class="update-button">
                                    <input type="submit" value="Thanh toán" name="proceed" class="checkout-button button alt wc-forward" formaction="../WebMidtermProject/checkout.html"/>
                                </form>
                            </form>

                            <div class="cart-collaterals">
                                {{> cart_ListOtherProducts}}
                                {{> cart_TotalMoney}}

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let data = [];
        $('#cart_table').find('tr').each(function (i, el) {
                var $tds = $(this).find('td'),
                name = $tds.eq(2).find('a').text();
                count = $tds.eq(4).find('input[type=number]').val();
                data.push({name, count});
        });
        console.log(JSON.stringify(data));
        
        $('#table_cart').submit(() => {
            $.post('http://localhost:8080/cart/update', 
            JSON.stringify(data), 
            (data) => {
                console.log(data);
            },
            'text'
            );  
        })
    </script>